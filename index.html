<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ujian Nasional Bucin 2025</title>
    <!-- Import Font: Great Vibes (Latin) & Poppins (Modern) -->
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        /* --- ROMANTIC THEME VARIABLES --- */
        :root {
            --primary: #ff6b81;
            --secondary: #ff4757;
            --bg-gradient: linear-gradient(120deg, #fccb90 0%, #d57eeb 100%);
            --glass-bg: rgba(255, 255, 255, 0.9);
            --text-color: #2f3542;
            --border-radius: 20px;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-image: linear-gradient(to top, #fad0c4 0%, #ffd1ff 100%);
            background-attachment: fixed;
            background-size: cover;
            margin: 0;
            padding: 40px 20px;
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            overflow-x: hidden;
            position: relative; /* Penting agar elemen absolute mengacu ke body */
        }

        /* Background Animasi Hati */
        .hearts-bg {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }

        .heart-float {
            position: absolute;
            bottom: -100px;
            width: 20px;
            height: 20px;
            background: rgba(255, 255, 255, 0.6);
            transform: rotate(45deg);
            animation: floatUp 15s linear infinite;
        }
        
        .heart-float::before, .heart-float::after {
            content: ""; position: absolute; width: 20px; height: 20px;
            background: inherit; border-radius: 50%;
        }
        .heart-float::before { top: -10px; left: 0; }
        .heart-float::after { left: -10px; top: 0; }

        @keyframes floatUp {
            0% { transform: translateY(0) rotate(45deg) scale(0.8); opacity: 0; }
            20% { opacity: 0.8; }
            100% { transform: translateY(-120vh) rotate(45deg) scale(1.5); opacity: 0; }
        }

        /* Main Container */
        .container {
            max-width: 650px;
            width: 100%;
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            padding: 40px;
            border-radius: var(--border-radius);
            box-shadow: 0 20px 50px rgba(0,0,0,0.1);
            border: 2px solid rgba(255, 255, 255, 0.8);
            position: relative;
            z-index: 10;
            margin-top: 60px; /* Tambah margin atas biar gak ketutup tombol musik */
        }

        h1 {
            text-align: center;
            font-family: 'Great Vibes', cursive;
            color: #d63031;
            font-weight: 400;
            font-size: 4rem;
            margin: 10px 0 5px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            background: -webkit-linear-gradient(#ff6b81, #ff4757);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1.2;
        }

        .subtitle {
            text-align: center;
            color: #636e72;
            font-size: 0.95em;
            margin-bottom: 40px;
            font-style: italic;
            font-weight: 300;
        }

        .section-title {
            margin-top: 50px;
            margin-bottom: 25px;
            font-size: 2rem;
            font-family: 'Great Vibes', cursive;
            color: #e84393;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .section-title::after { content: '‚ù§Ô∏è'; font-size: 0.6em; opacity: 0.7; }
        .section-title::before, .section-title::after { flex: 1; content: ''; height: 1px; background: #fab1a0; }

        /* Form Inputs */
        .form-group {
            margin-bottom: 25px;
            background: rgba(255, 255, 255, 0.6);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.8);
            transition: all 0.3s ease;
        }

        .form-group:hover {
            transform: translateY(-3px);
            background: white;
            box-shadow: 0 10px 25px rgba(255, 107, 129, 0.15);
            border-color: #ffcccc;
        }
        
        label {
            display: block; margin-bottom: 12px; font-weight: 600;
            color: #574b90; font-size: 1rem;
        }
        
        input[type="text"], textarea {
            width: 100%; padding: 15px; border: 2px solid #f8a5c2;
            border-radius: 12px; box-sizing: border-box;
            font-family: 'Poppins', sans-serif; font-size: 0.95rem;
            background: #fff5f7; transition: all 0.3s ease; color: #2f3542;
        }
        
        textarea { height: 100px; resize: vertical; }

        input:focus, textarea:focus {
            border-color: #e84393; background: white; outline: none;
            box-shadow: 0 0 15px rgba(232, 67, 147, 0.2);
        }

        .input-error {
            border-color: #ff4757 !important;
            background-color: #fff0f1 !important;
            animation: shake 0.5s;
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }

        /* Buttons */
        button {
            width: 100%;
            background: linear-gradient(45deg, #ff9a9e 0%, #fad0c4 99%, #fad0c4 100%);
            color: #fff; padding: 18px; border: none; border-radius: 50px;
            font-size: 1.1rem; font-family: 'Poppins', sans-serif; font-weight: 600;
            cursor: pointer; transition: all 0.3s ease; margin-top: 30px;
            box-shadow: 0 10px 20px rgba(255, 154, 158, 0.4);
            text-transform: uppercase; letter-spacing: 0.5px;
        }
        
        button:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 15px 30px rgba(255, 154, 158, 0.6);
            background: linear-gradient(45deg, #fad0c4 0%, #ff9a9e 100%);
        }
        
        button:disabled { background: #ced6e0; box-shadow: none; cursor: not-allowed; transform: none; }

        /* --- SERTIFIKAT STYLE --- */
        .certificate-box {
            display: none;
            text-align: center;
            padding: 30px;
            border: 8px double #ff9a9e;
            background: white;
            position: relative;
            margin-top: 30px;
            animation: slideUp 0.8s ease-out;
            background-image: url('data:image/svg+xml;utf8,<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="2" cy="2" r="1" fill="%23ffeaa7"/></svg>');
        }

        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .cert-header {
            font-family: 'Great Vibes', cursive;
            font-size: 3rem; color: #d63031; margin-bottom: 10px;
        }
        
        .cert-body { font-size: 1rem; color: #555; margin-bottom: 15px; }

        .cert-name {
            font-size: 2.5rem; font-weight: bold; color: #e84393;
            border-bottom: 2px solid #fab1a0; display: inline-block;
            padding: 0 20px; margin: 10px 0 25px 0;
            font-family: 'Great Vibes', cursive;
        }

        .cert-badge {
            font-size: 3rem; margin: 20px 0;
            animation: pulse 2s infinite;
        }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }

        /* Loader */
        .loader {
            display: none; text-align: center; margin-top: 20px;
            color: #ff6b81; font-weight: 600;
        }

        /* --- MUSIC PLAYER ABSOLUTE (Tidak Ikut Scroll) --- */
        .music-player {
            position: absolute; /* Ubah ke absolute agar menempel di atas halaman */
            top: 20px;       
            right: 20px;     
            z-index: 1000;   
            
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            padding: 10px 20px; 
            border-radius: 50px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: flex; align-items: center; gap: 10px;
            border: 2px solid #ff9a9e; cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            user-select: none;
        }

        .music-player:hover { transform: scale(1.05); background: white; border-color: #ff6b81; }
        .music-player:active { transform: scale(0.95); }

        .music-icon { 
            font-size: 1.2rem; 
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .music-player.playing { background: #fff0f1; border-color: #ff4757; }
        .music-player.playing .music-text { color: #ff4757; }

        .music-text { font-size: 0.9rem; font-weight: 700; color: #ff6b81; transition: color 0.3s; }

        /* Modal Alert */
        .modal-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 9999;
            justify-content: center; align-items: center; backdrop-filter: blur(5px);
        }

        .modal-box {
            background: white; padding: 40px 30px; border-radius: 25px;
            max-width: 400px; width: 85%; text-align: center;
            box-shadow: 0 25px 50px rgba(0,0,0,0.25);
            animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border-top: 5px solid #ff6b81;
        }

        @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        .modal-btn {
            background: #ff6b81; color: white; margin-top: 15px;
            min-width: 120px; padding: 12px 25px; border-radius: 50px;
            font-weight: 600; font-family: 'Poppins', sans-serif;
            border: none; cursor: pointer;
        }

        @media (max-width: 480px) {
            h1 { font-size: 3rem; }
            .container { padding: 25px 20px; }
            .cert-header { font-size: 2.5rem; }
            .music-player { top: 15px; right: 15px; padding: 8px 15px; }
            .music-text { display: none; }
            .music-icon { font-size: 1.5rem; }
        }
    </style>
</head>
<body>

    <!-- Background Hearts Animation -->
    <div class="hearts-bg" id="heartsContainer"></div>

    <!-- Music Player Absolute (POSISI DIATAS KANAN) -->
    <div class="music-player" id="musicBtn" onclick="toggleMusic()">
        <div class="music-icon" id="musicIcon">‚ñ∂Ô∏è</div>
        <div class="music-text" id="musicText">Putar Musik</div>
        <audio id="bgMusic" loop>
            <source src="sound.mp3" type="audio/mpeg">
        </audio>
    </div>

    <div class="container" id="main-container">
        <h1>Ujian Nasional Bucin</h1>
        <div class="subtitle">Kode Soal: P-2025 ‚Ä¢ Spesial Untukmu üíå</div>

        <form id="bucinForm" novalidate>
            <!-- Nama -->
            <div class="form-group" style="background: #fff0f1; border-color: #ffccd5;">
                <label>‚ú® Nama Peserta Ujian:</label>
                <input type="text" name="nama" placeholder="Tulis nama lengkap kamu di sini sayang..." required>
            </div>

            <!-- BAGIAN 1: DEEP TALK -->
            <div class="section-title deep-talk">Bagian I: Deep Talk</div>
            
            <div class="form-group">
                <label>1. Kapan momen spesifik kamu merasa "paling disayang" sama aku?</label>
                <textarea name="soal1" required></textarea>
            </div>
            <div class="form-group">
                <label>2. Ada gak hal dari aku yang sebenernya bikin kamu sedih/kecewa tapi kamu pendem?</label>
                <textarea name="soal2" required></textarea>
            </div>
            <div class="form-group">
                <label>3. Apa definisi "Bahagia" menurut kamu kalau lagi sama aku?</label>
                <textarea name="soal3" required></textarea>
            </div>
            <div class="form-group">
                <label>4. Apa ketakutan terbesar kamu soal hubungan kita kedepannya?</label>
                <textarea name="soal4" required></textarea>
            </div>
            <div class="form-group">
                <label>5. Coba bayangin kita 5 tahun lagi. Kita lagi ngapain dan ada dimana?</label>
                <textarea name="soal5" required></textarea>
            </div>

            <!-- BAGIAN 2: NOSTALGIA -->
            <div class="section-title nostalgia">Bagian II: Nostalgia</div>

            <div class="form-group">
                <label>6. Jujur, apa First Impression kamu pas pertama kali liat aku?</label>
                <textarea name="soal6" required></textarea>
            </div>
            <div class="form-group">
                <label>7. Masih inget gak tanggal/momen pas kita resmi 'klik' satu sama lain?</label>
                <textarea name="soal7" required></textarea>
            </div>
            <div class="form-group">
                <label>8. Lagu apa yang kalau kamu dengerin di jalan, langsung inget aku?</label>
                <textarea name="soal8" required></textarea>
            </div>
            <div class="form-group">
                <label>9. Kado atau barang pertama yang pernah aku kasih, nasibnya gimana sekarang?</label>
                <textarea name="soal9" required></textarea>
            </div>
            <div class="form-group">
                <label>10. Kejadian paling konyol/memalukan yang pernah kita alamin bareng?</label>
                <textarea name="soal10" required></textarea>
            </div>

            <!-- BAGIAN 3: LUCU-LUCUAN -->
            <div class="section-title lucu">Bagian III: Random</div>

            <div class="form-group">
                <label>11. Kalau aku dikutuk jadi hewan, kira-kira aku cocoknya jadi hewan apa? Kenapa?</label>
                <textarea name="soal11" required></textarea>
            </div>
            <div class="form-group">
                <label>12. Kebiasaan jorok/aneh aku yang sebenernya bikin ilfeel tapi kamu tahan-tahan?</label>
                <textarea name="soal12" required></textarea>
            </div>
            <div class="form-group">
                <label>13. Kalau ada Zombie Apocalypse, siapa yang bakal mati duluan? Aku atau kamu?</label>
                <textarea name="soal13" required></textarea>
            </div>
            <div class="form-group">
                <label>14. Kalau kita tukeran badan (jiwa) sehari, hal gila apa yang mau kamu lakuin pake badan aku?</label>
                <textarea name="soal14" required></textarea>
            </div>
            <div class="form-group">
                <label>15. Kasih rating 1-10 buat skill aku (pilih bebas), terus kasih komentar pedas!</label>
                <textarea name="soal15" required></textarea>
            </div>

            <!-- Tombol Kirim -->
            <button type="submit" id="btnKirim">Kirim Jawaban ‚ù§Ô∏è</button>
            <div class="loader" id="loader">Sedang mengirim surat cinta ke server... üïäÔ∏è</div>
        </form>

        <!-- SERTIFIKAT KELULUSAN -->
        <div id="pesanSukses" class="certificate-box">
            <div class="cert-header">Sertifikat Bucin</div>
            <div class="cert-body">Diberikan dengan penuh cinta kepada:</div>
            <div class="cert-name" id="certName">Nama Pasangan</div>
            <div class="cert-body">
                Telah berhasil menyelesaikan <b>Ujian Nasional Bucin 2025</b><br>
                dengan penuh kesabaran dan kejujuran.
            </div>
            <div class="cert-badge">üèÖ LULUS 100%</div>
            <p style="font-size:0.8rem; color:#888;">Screenshot sertifikat ini dan kirim ke aku ya!</p>
            <button onclick="ulangIsi()" style="background: #a29bfe; font-size: 0.9rem; width: auto; padding: 10px 30px; margin-top: 15px;">Isi Lagi / Revisi üîÑ</button>
        </div>
        
        <!-- Pesan Gagal -->
        <div id="pesanGagal" class="status-box error" style="display:none; padding:20px; border-radius:15px; background:#fff0f1; border:2px solid #ff4757; text-align:center; margin-top:20px;">
            <h3 style="margin:0; color:#ff4757;">‚ö†Ô∏è Gagal Mengirim</h3>
            <p>Yah koneksinya putus kayak hubungan tanpa komunikasi.<br>Coba kirim ulang ya!</p>
        </div>

    </div>

    <!-- CUSTOM ALERT POPUP -->
    <div id="customAlert" class="modal-overlay">
        <div class="modal-box">
            <h3 style="font-family: 'Great Vibes', cursive; font-size: 2.5rem; color: #ff6b81; margin-bottom: 5px;">Tunggu Dulu Sayang! ü•∫</h3>
            <p id="alertMessage">Pesan error disini...</p>
            <button class="modal-btn" onclick="closeAlert()">Oke, Aku Isi Deh ‚ù§Ô∏è</button>
        </div>
    </div>

    <script>
        // ==========================================
        // üëá URL SCRIPT ANDA üëá
        // ==========================================
        const scriptURL = 'https://script.google.com/macros/s/AKfycbxCPcwdwVbrYAIC4GINQqbat1iG2PM7l1rPyyhMxX37mJRKSU9KVx6DDlGN_8dG7_oDGg/exec'; 
        
        // --- ANIMASI HATI ---
        function createHearts() {
            const heartsContainer = document.getElementById('heartsContainer');
            for (let i = 0; i < 15; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.classList.add('heart-float');
                    heart.style.left = Math.random() * 100 + 'vw';
                    heart.style.animationDuration = (Math.random() * 3 + 10) + 's'; 
                    const size = Math.random() * 10 + 10;
                    heart.style.width = size + 'px';
                    heart.style.height = size + 'px';
                    heartsContainer.appendChild(heart);
                    setTimeout(() => { heart.remove(); }, 15000); 
                }, i * 800);
            }
            setInterval(() => {
                const heart = document.createElement('div');
                heart.classList.add('heart-float');
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animationDuration = (Math.random() * 3 + 10) + 's';
                const size = Math.random() * 10 + 10;
                heart.style.width = size + 'px';
                heart.style.height = size + 'px';
                heartsContainer.appendChild(heart);
                setTimeout(() => { heart.remove(); }, 15000);
            }, 1000);
        }

        // --- MUSIC PLAYER LOGIC (UPDATED) ---
        function toggleMusic() {
            const audio = document.getElementById('bgMusic');
            const btn = document.getElementById('musicBtn');
            const text = document.getElementById('musicText');
            const icon = document.getElementById('musicIcon');

            if (audio.paused) {
                audio.play();
                btn.classList.add('playing');
                icon.innerText = "‚è∏Ô∏è"; // Ganti icon jadi Pause
                text.innerText = "Pause Musik";
            } else {
                audio.pause();
                btn.classList.remove('playing');
                icon.innerText = "‚ñ∂Ô∏è"; // Ganti icon jadi Play
                text.innerText = "Putar Musik";
            }
        }

        window.onload = createHearts;

        // --- FORM LOGIC ---
        const form = document.forms['bucinForm'];
        const btnKirim = document.getElementById('btnKirim');
        const loader = document.getElementById('loader');
        const pesanSukses = document.getElementById('pesanSukses');
        const pesanGagal = document.getElementById('pesanGagal');
        const customAlert = document.getElementById('customAlert');
        const alertMessage = document.getElementById('alertMessage');
        const certName = document.getElementById('certName');

        function showCustomAlert(msg) {
            alertMessage.innerHTML = msg;
            customAlert.style.display = 'flex';
        }

        function closeAlert() {
            customAlert.style.display = 'none';
        }

        function ulangIsi() {
            pesanSukses.style.display = 'none';
            form.style.display = 'block';
            form.reset();
            btnKirim.disabled = false;
            btnKirim.innerHTML = "Kirim Jawaban ‚ù§Ô∏è";
            const inputs = document.querySelectorAll('input, textarea');
            inputs.forEach(input => {
                input.classList.remove('input-error');
                input.style.borderColor = '#f8a5c2'; 
            });
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        const inputs = document.querySelectorAll('input, textarea');
        inputs.forEach(input => {
            input.addEventListener('input', function() {
                if (this.value.trim() !== '') {
                    this.classList.remove('input-error');
                    this.style.borderColor = '#e84393'; 
                }
            });
        });

        form.addEventListener('submit', e => {
            e.preventDefault();

            let kosong = [];
            let firstEmptyInput = null;

            const inputNama = form.querySelector('input[name="nama"]');
            if (!inputNama.value.trim()) {
                kosong.push("Nama Kamu");
                inputNama.classList.add('input-error');
                if (!firstEmptyInput) firstEmptyInput = inputNama;
            }

            for (let i = 1; i <= 15; i++) {
                const inputSoal = form.querySelector(`textarea[name="soal${i}"]`);
                if (inputSoal && !inputSoal.value.trim()) {
                    kosong.push("No. " + i);
                    inputSoal.classList.add('input-error');
                    if (!firstEmptyInput) firstEmptyInput = inputSoal;
                }
            }

            if (kosong.length > 0) {
                let pesan = "Masih ada yang kosong nih sayang!<br><br><b>Kamu belum mengisi:</b><br>";
                pesan += kosong.slice(0, 5).join(", ");
                if (kosong.length > 5) { pesan += ", dan " + (kosong.length - 5) + " lainnya."; }
                pesan += "<br><br>Diisi lengkap ya cantik/ganteng! üòò";
                showCustomAlert(pesan);

                if (firstEmptyInput) {
                    firstEmptyInput.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    firstEmptyInput.focus({ preventScroll: true });
                }
                return;
            }
            
            if (!scriptURL) {
                showCustomAlert("Error: Script URL belum dipasang.");
                return;
            }

            // Set nama di sertifikat
            certName.innerText = inputNama.value;

            btnKirim.disabled = true;
            btnKirim.innerHTML = "Sedang Mengirim... üíå";
            loader.style.display = 'block';
            pesanGagal.style.display = 'none';

            fetch(scriptURL, { method: 'POST', body: new FormData(form)})
                .then(response => {
                    loader.style.display = 'none';
                    form.style.display = 'none';
                    pesanSukses.style.display = 'block';
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                })
                .catch(error => {
                    loader.style.display = 'none';
                    btnKirim.disabled = false;
                    btnKirim.innerHTML = "Kirim Jawaban ‚ù§Ô∏è";
                    pesanGagal.style.display = 'block';
                });
        });
    </script>
</body>
</html>